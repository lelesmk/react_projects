(this["webpackJsonpreact-flux-app"]=this["webpackJsonpreact-flux-app"]||[]).push([[0],{29:function(e,t,n){e.exports=n(44)},44:function(e,t,n){"use strict";n.r(t);n(30);var a=n(0),r=n.n(a),u=n(10),c=n(4);var o=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Pluralsight Administration"),r.a.createElement("p",null,"React, Flux, and React Router for ultra-responsive web apps."),r.a.createElement(c.b,{to:"/about",className:"btn btn-primary"},"About"))},l=n(11),i=n(12),s=n(16),h=n(17),m=function(e){Object(h.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"This app uses React."))}}]),n}(r.a.Component),f=n(6),g=n(19),d=new(n(27).Dispatcher),E="CREATE_COURSE",b="UPDATE_COURSE",p="DELETE_COURSE",v="LOAD_COURSES",O="CREATE_AUTHOR",C="UPDATE_AUTHOR",y="DELETE_AUTHOR",j="GET_AUTHOR",A="LOAD_AUTHORS",S=[],T=new(function(e){Object(h.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return S}},{key:"getCourseBySlug",value:function(e){return S.find((function(t){return t.slug===e}))}},{key:"courseFound",value:function(e){return S.filter((function(t){return t.slug===e})).length>0}}]),n}(g.EventEmitter));d.register((function(e){switch(e.actionType){case E:S.push(e.course),T.emitChange();break;case v:S=e.courses,T.emitChange();break;case b:S=S.map((function(t){return t.id===e.course.id?e.course:t})),T.emitChange();break;case p:S=S.filter((function(t){return t.id!==parseInt(e.id,10)})),T.emitChange()}}));var k=T,_=[],L=new(function(e){Object(h.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getAuthors",value:function(){return _}},{key:"getAuthorById",value:function(e){return _.find((function(t){return t.id===e}))}},{key:"authorFound",value:function(e){return _.filter((function(t){return t.id===e})).length>0}}]),n}(g.EventEmitter));d.register((function(e){switch(e.actionType){case O:_.push(e.author),L.emitChange();break;case j:_=e.author,L.emitChange();break;case A:_=e.authors,L.emitChange();break;case C:_=_.map((function(t){return t.id===e.author.id?e.author:t})),L.emitChange();break;case y:_=_.filter((function(t){return t.id!==parseInt(e.id,10)})),L.emitChange()}}));var P=L,N=n(13),R=n(23),D=n.n(R),I=n(28);function U(e){return x.apply(this,arguments)}function x(){return(x=Object(I.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw n=e.sent,new Error(n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){throw console.error("API call failed. "+e),e}var F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/courses/";function H(e){return function(e){return fetch(F+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(N.a)({},e,{authorId:parseInt(e.authorId,10)}))}).then(U).catch(w)}(e).then((function(t){d.dispatch({actionType:e.id?b:E,course:t})}))}function B(){return fetch(F).then(U).catch(w).then((function(e){d.dispatch({actionType:v,courses:e})}))}function K(e){return(t=e,fetch(F+t,{method:"DELETE"}).then(U).catch(w)).then((function(){d.dispatch({actionType:p,id:e})}));var t}var W=function(e){return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"\xa0"))),r.a.createElement("tbody",null,e.courses.map((function(e){}))))},q=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/authors/";function J(){return fetch(q).then(U).catch(w)}function M(e){return function(e){return fetch(q+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(U).catch(w)}(e).then((function(t){d.dispatch({actionType:e.id?C:O,author:t})}))}function V(){return J().then((function(e){d.dispatch({actionType:A,authors:e})}))}function G(e){return(t=e,fetch(q+t,{method:"DELETE"}).then(U).catch(w)).then((function(){d.dispatch({actionType:y,id:e})}));var t}var z=function(){var e=Object(a.useState)(k.getCourses()),t=Object(f.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(P.getAuthors()),l=Object(f.a)(o,2),i=l[0],s=l[1];return Object(a.useEffect)((function(){return k.addChangeListener(h),0===k.getCourses().length&&B(),function(){return k.removeChangeListener(h)}}),[]),Object(a.useEffect)((function(){return P.addChangeListener(m),0===P.getAuthors().length&&V(),function(){return P.removeChangeListener(m)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Courses"),r.a.createElement(c.b,{to:"/course",className:"btn btn-primary"},"Add Course"),r.a.createElement(W,{courses:n,deleteCourse:K,authors:i,getAuthorName:function(e,t){console.log("searchAuthor() runs...");for(var n=0;n<t.length;n++)return console.log("authorsArray[i].name: "+t[e].name),t[e].name}}));function h(){u(k.getCourses())}function m(){s(P.getAuthors())}};var Q=function(e){return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Admin Panel"),r.a.createElement("th",null,"\xa0"))),r.a.createElement("tbody",null,e.authors.map((function(e){}))))};var X=function(){var e=Object(a.useState)(P.getAuthors()),t=Object(f.a)(e,2),n=t[0],u=t[1];return Object(a.useEffect)((function(){return P.addChangeListener(o),0===P.getAuthors().length&&V(),function(){return P.removeChangeListener(o)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Authors"),r.a.createElement(c.b,{to:"/author",className:"btn btn-primary"},"Add Author"),r.a.createElement(Q,{authors:n,deleteAuthor:G,getAuthorName:function(e,t){console.log("searchAuthor() runs...");for(var n=0;n<t.length;n++)return console.log("authorsArray[i].name: "+t[e].name),t[e].name}}));function o(){u(P.getAuthors())}},Y=n(14);function Z(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),r.a.createElement("div",{className:t},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})),e.error&&r.a.createElement("div",{className:"alert alert-danger"},e.error))}Z.defaultProps={error:""};var $=Z;function ee(e){var t=Object(a.useState)([{value:"",label:"Loading..."}]),n=Object(f.a)(t,2),r=(n[0],n[1]),u=Object(a.useState)(!0),c=Object(f.a)(u,2),o=(c[0],c[1]);e.error.length,Object(a.useEffect)((function(){var e=!1;return e||(J().then((function(e){return r(e.map((function(e){return{value:e.id,label:e.name}})))})),o(!1)),function(){e=!0}}),[])}ee.defaultProps={error:""};var te=ee;var ne=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement($,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.course.title}),r.a.createElement(te,{id:"author",label:"Author",name:"authorId",onChange:e.onChange,value:e.course.authorId||""}),r.a.createElement($,{id:"category",label:"Category",name:"category",onChange:e.onChange,value:e.course.category}),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))},ae=n(15),re=function(e){var t=Object(a.useState)({}),n=Object(f.a)(t,2),u=n[0],c=n[1],o=Object(a.useState)(k.getCourses()),l=Object(f.a)(o,2),i=l[0],s=l[1],h=Object(a.useState)({id:null,slug:"",title:"",authorId:null,category:""}),m=Object(f.a)(h,2),g=m[0],d=m[1];function E(){s(k.getCourses())}return Object(a.useEffect)((function(){k.addChangeListener(E);var t=e.match.params.slug;return 0===i.length?B():t&&(!0===k.courseFound(t)?d(k.getCourseBySlug(t)):e.history.push("/404")),function(){return k.removeChangeListener(E)}}),[e.history,i.length,e.match.params.slug]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Manage Course"),r.a.createElement(ne,{course:g,onChange:function(e){var t=Object(N.a)({},g,Object(Y.a)({},e.target.name,e.target.value));d(t)},onSubmit:function(t){(function(){var e={};return g.title||(e.title="Title is required"),g.authorId||(e.authorId="Author ID is required"),g.category||(e.category="Category is required"),c(e),0===Object.keys(e).length})()&&(t.preventDefault(),H(g).then((function(){e.history.push("/courses"),ae.b.success("Course saved.")})))},errors:u}))};var ue=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement($,{id:e.id,label:"Author",onChange:e.onChange,name:"author",value:e.author.name,error:e.errors.name}),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))},ce=function(e){var t=Object(a.useState)({}),n=Object(f.a)(t,2),u=n[0],c=n[1],o=Object(a.useState)(P.getAuthors()),l=Object(f.a)(o,2),i=l[0],s=l[1],h=Object(a.useState)({id:null,name:""}),m=Object(f.a)(h,2),g=m[0],d=m[1];function E(){s(P.getAuthors())}return Object(a.useEffect)((function(){P.addChangeListener(E);var t=e.match.params.id;return 0===i.length?V():t&&(!0===P.authorFound(t)?d(P.getAuthorById(t)):e.history.push("/404")),function(){return P.removeChangeListener(E)}}),[e.history,i.length,e.match.params.id]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Manage Author"),r.a.createElement(ue,{author:g,onChange:function(e){var t=Object(N.a)({},g,Object(Y.a)({},e.target.name,e.target.value));d(t)},onSubmit:function(t){(function(){var e={};return g.name||(e.name="Name is required"),c(e),0===Object.keys(e).length})()&&(t.preventDefault(),M(g).then((function(){e.history.push("/authors"),ae.b.success("Author saved.")})))},errors:u}))},oe=n(3);var le=function(){var e={color:"orange"};return r.a.createElement("nav",null,r.a.createElement(c.c,{activeStyle:e,exact:!0,to:"/"},"Home")," | ",r.a.createElement(c.c,{activeStyle:e,to:"/courses"},"Courses")," | ",r.a.createElement(c.c,{activeStyle:e,to:"/authors"},"Authors")," | ",r.a.createElement(c.c,{activeStyle:e,to:"/about"},"About"))};var ie=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Page Not Found"),r.a.createElement("p",null,r.a.createElement(c.b,{to:"/"},"Back to home.")))};n(43);var se=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(ae.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(le,null),r.a.createElement(oe.c,null,r.a.createElement(oe.a,{path:"/",exact:!0,component:o}),r.a.createElement(oe.a,{path:"/courses",exact:!0,component:z}),r.a.createElement(oe.a,{path:"/about",exact:!0,component:m}),r.a.createElement(oe.a,{path:"/course/:slug",exact:!0,component:re}),r.a.createElement(oe.a,{path:"/course",exact:!0,component:re}),r.a.createElement(oe.a,{path:"/authors",exact:!0,component:X}),r.a.createElement(oe.a,{path:"/author",exact:!0,component:ce}),r.a.createElement(oe.a,{path:"/404-Page-Not-Found",component:ie}),r.a.createElement(oe.a,{component:ie})))};Object(u.render)(r.a.createElement(c.a,null,r.a.createElement(se,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.eabc71ca.chunk.js.map