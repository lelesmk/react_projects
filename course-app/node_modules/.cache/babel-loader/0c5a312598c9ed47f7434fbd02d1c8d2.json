{"ast":null,"code":"var _jsxFileName = \"/Users/LelethuMkefa/dev/js-course/react-flux-app/src/common/SelectDropDown.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getAuthors } from \"../api/authorApi\";\n\nfunction SelectDropDown(props) {\n  // 1. Set initial value of state and return current value\n  const [options, setOptions] = useState([{\n    value: \"\",\n    label: \"Loading...\"\n  }]); // 4. Stop use from interacting with dropdown while loading\n\n  const [loading, setLoading] = useState(true); // 6. Control dropdown value selected in state and set initial value\n  //   const [value, setValue] = useState(\"Select author\");\n\n  let wrapperClass = \"form-group\"; // Dynamically add a Bootstrap class name\n\n  if (props.error.length > 0) {\n    wrapperClass += \" has-error\";\n    /** Bootstrapper has-error class will add a\n     *  red line around the input when it is in\n     *  an error state.\n     */\n  }\n\n  useEffect(() =>\n  /** first parameter is a function to execute when\n   *  the side effect runs */\n  {\n    // 5. Set unmounted flag to set state only if use is still on the page\n    let unmounted = false; // 3. Fetch data from a API if use is still mounted\n\n    if (!unmounted) {\n      getAuthors().then(_options => setOptions(_options.map(({\n        id,\n        name\n      }) => ({\n        value: id,\n        label: name\n      })))); // 4. Enable dropdown after loading\n\n      setLoading(false);\n    } // on unmount -> 5\n\n\n    return () => {\n      unmounted = true;\n    };\n  },\n  /** second parameter determines when the side effect runs.\n   *  In our case this is just after the component first\n   *  renders because we have specified an empty array */\n  []); // 2. Map current value of state to select dropdown options\n\n  return (\n    /*#__PURE__*/\n\n    /** diabable while loading -> 4\n     *  bind value in state to value prop on select element -> 6\n     *  update this state in a change event listener with onChange prop ->6\n     */\n    React.createElement(\"div\", {\n      className: wrapperClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, props.label), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: props.id,\n      name: props.name,\n      className: \"form-control\",\n      disabled: loading,\n      onChange: props.onChange,\n      value: props.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, options.map(item =>\n    /*#__PURE__*/\n\n    /** render the relevant option element */\n    React.createElement(\"option\", {\n      key: item.value,\n      value: item.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, item.label)))), props.error && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 23\n      }\n    }, props.error))\n  );\n} // declare default PropTypes\n\n\nSelectDropDown.defaultProps = {\n  // if no error passed in, default to empty string\n  error: \"\"\n};\nexport default SelectDropDown;","map":{"version":3,"sources":["/Users/LelethuMkefa/dev/js-course/react-flux-app/src/common/SelectDropDown.js"],"names":["React","useState","useEffect","getAuthors","SelectDropDown","props","options","setOptions","value","label","loading","setLoading","wrapperClass","error","length","unmounted","then","_options","map","id","name","onChange","item","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,CAAC;AAAEO,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,KAAK,EAAE;AAApB,GAAD,CAAD,CAAtC,CAF6B,CAI7B;;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC,CAL6B,CAO7B;AACA;;AAEA,MAAIW,YAAY,GAAG,YAAnB,CAV6B,CAW7B;;AACA,MAAIP,KAAK,CAACQ,KAAN,CAAYC,MAAZ,GAAqB,CAAzB,EAA4B;AAC1BF,IAAAA,YAAY,IAAI,YAAhB;AACA;;;;AAID;;AAEDV,EAAAA,SAAS,CACP;AACE;;AAEA;AACE;AACA,QAAIa,SAAS,GAAG,KAAhB,CAFF,CAIE;;AACA,QAAI,CAACA,SAAL,EAAgB;AACdZ,MAAAA,UAAU,GAAGa,IAAb,CAAmBC,QAAD,IAChBV,UAAU,CACRU,QAAQ,CAACC,GAAT,CAAa,CAAC;AAAEC,QAAAA,EAAF;AAAMC,QAAAA;AAAN,OAAD,MAAmB;AAAEZ,QAAAA,KAAK,EAAEW,EAAT;AAAaV,QAAAA,KAAK,EAAEW;AAApB,OAAnB,CAAb,CADQ,CADZ,EADc,CAOd;;AACAT,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAdH,CAgBE;;;AACA,WAAO,MAAM;AACXI,MAAAA,SAAS,GAAG,IAAZ;AACD,KAFD;AAGD,GAxBI;AAyBP;;;AAGA,IA5BO,CAAT,CApB6B,CAmD7B;;AACA;AAAA;;AACE;;;;AAIA;AAAK,MAAA,SAAS,EAAEH,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,OAAO,EAAEP,KAAK,CAACc,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2Bd,KAAK,CAACI,KAAjC,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,EAAE,EAAEJ,KAAK,CAACc,EADZ;AAEE,MAAA,IAAI,EAAEd,KAAK,CAACe,IAFd;AAGE,MAAA,SAAS,EAAC,cAHZ;AAIE,MAAA,QAAQ,EAAEV,OAJZ;AAKE,MAAA,QAAQ,EAAEL,KAAK,CAACgB,QALlB;AAME,MAAA,KAAK,EAAEhB,KAAK,CAACG,KANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASGF,OAAO,CAACY,GAAR,CAAaI,IAAD;AAAA;;AACX;AAEA;AAAQ,MAAA,GAAG,EAAEA,IAAI,CAACd,KAAlB;AAAyB,MAAA,KAAK,EAAEc,IAAI,CAACd,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGc,IAAI,CAACb,KADR,CAHD,CATH,CADF,CAFF,EAsBGJ,KAAK,CAACQ,KAAN,iBAAe;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqCR,KAAK,CAACQ,KAA3C,CAtBlB;AALF;AA8BD,C,CAED;;;AACAT,cAAc,CAACmB,YAAf,GAA8B;AAC5B;AACAV,EAAAA,KAAK,EAAE;AAFqB,CAA9B;AAKA,eAAeT,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getAuthors } from \"../api/authorApi\";\n\nfunction SelectDropDown(props) {\n  // 1. Set initial value of state and return current value\n  const [options, setOptions] = useState([{ value: \"\", label: \"Loading...\" }]);\n\n  // 4. Stop use from interacting with dropdown while loading\n  const [loading, setLoading] = useState(true);\n\n  // 6. Control dropdown value selected in state and set initial value\n  //   const [value, setValue] = useState(\"Select author\");\n\n  let wrapperClass = \"form-group\";\n  // Dynamically add a Bootstrap class name\n  if (props.error.length > 0) {\n    wrapperClass += \" has-error\";\n    /** Bootstrapper has-error class will add a\n     *  red line around the input when it is in\n     *  an error state.\n     */\n  }\n\n  useEffect(\n    () =>\n      /** first parameter is a function to execute when\n       *  the side effect runs */\n      {\n        // 5. Set unmounted flag to set state only if use is still on the page\n        let unmounted = false;\n\n        // 3. Fetch data from a API if use is still mounted\n        if (!unmounted) {\n          getAuthors().then((_options) =>\n            setOptions(\n              _options.map(({ id, name }) => ({ value: id, label: name }))\n            )\n          );\n\n          // 4. Enable dropdown after loading\n          setLoading(false);\n        }\n\n        // on unmount -> 5\n        return () => {\n          unmounted = true;\n        };\n      },\n    /** second parameter determines when the side effect runs.\n     *  In our case this is just after the component first\n     *  renders because we have specified an empty array */\n    []\n  );\n\n  // 2. Map current value of state to select dropdown options\n  return (\n    /** diabable while loading -> 4\n     *  bind value in state to value prop on select element -> 6\n     *  update this state in a change event listener with onChange prop ->6\n     */\n    <div className={wrapperClass}>\n      <label htmlFor={props.id}>{props.label}</label>\n      <div className=\"field\">\n        <select\n          id={props.id}\n          name={props.name}\n          className=\"form-control\"\n          disabled={loading}\n          onChange={props.onChange}\n          value={props.value}\n        >\n          {/** iterate current value and label props in state*/}\n          {options.map((item) => (\n            /** render the relevant option element */\n\n            <option key={item.value} value={item.value}>\n              {item.label}\n            </option>\n          ))}\n        </select>\n      </div>\n      {/** Display validation error below input */}\n      {props.error && <div className=\"alert alert-danger\">{props.error}</div>}\n    </div>\n  );\n}\n\n// declare default PropTypes\nSelectDropDown.defaultProps = {\n  // if no error passed in, default to empty string\n  error: \"\",\n};\n\nexport default SelectDropDown;\n"]},"metadata":{},"sourceType":"module"}