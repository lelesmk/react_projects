{"ast":null,"code":"var _jsxFileName = \"/Users/LelethuMkefa/dev/js-course/react-flux-app/src/components/AuthorDropDown.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getAuthors } from \"../api/authorApi\";\n\nfunction AuthorDropDown(props) {\n  // 1. Set initial value of state and return current value\n  const [authorOptions, setAuthorOptions] = useState([{\n    value: \"\",\n    label: \"Loading...\"\n  }]); // 4. Stop use from interacting with dropdown while loading\n\n  const [loading, setLoading] = useState(true); // 6. Control dropdown value selected in state and set initial value\n\n  const [value, setValue] = useState(\"Select author\");\n  useEffect(() =>\n  /** first parameter is a function to execute when\n   *  the side effect runs */\n  {\n    // 5. Set unmounted flag to set state only if use is still on the page\n    let unmounted = false; // 3. Fetch data from a API if use is still mounted\n\n    if (!unmounted) {\n      getAuthors().then(authors => setAuthorOptions(authors.map(({\n        id,\n        name\n      }) => ({\n        value: id,\n        label: name\n      }))));\n      console.log(\"authors in state: \" + authorOptions); // 4. Enable dropdown after loading\n\n      setLoading(false);\n    } // on unmount -> 5\n\n\n    return () => {\n      unmounted = true;\n    };\n  },\n  /** second parameter determines when the side effect runs.\n   *  In our case this is just after the component first\n   *  renders because we have specified an empty array */\n  []);\n  debugger; // 2. Map current value of state to select dropdown options\n\n  return (\n    /*#__PURE__*/\n\n    /** diabable while loading -> 4\n     *  bind value in state to value prop on select element -> 6\n     *  update this state in a change event listener with onChange prop ->6\n     */\n    React.createElement(\"div\", {\n      className: wrapperClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      disabled: loading,\n      value: value,\n      onChange: event => setValue(event.currentTarget.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, authorOptions.map((value, label) =>\n    /*#__PURE__*/\n\n    /** render the relevant option element */\n    React.createElement(\"option\", {\n      key: value,\n      value: value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, label))))\n  );\n}\n\nexport default AuthorDropDown;","map":{"version":3,"sources":["/Users/LelethuMkefa/dev/js-course/react-flux-app/src/components/AuthorDropDown.js"],"names":["React","useState","useEffect","getAuthors","AuthorDropDown","props","authorOptions","setAuthorOptions","value","label","loading","setLoading","setValue","unmounted","then","authors","map","id","name","console","log","wrapperClass","event","currentTarget"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B;AACA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCN,QAAQ,CAAC,CACjD;AAAEO,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,KAAK,EAAE;AAApB,GADiD,CAAD,CAAlD,CAF6B,CAM7B;;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC,CAP6B,CAS7B;;AACA,QAAM,CAACO,KAAD,EAAQI,QAAR,IAAoBX,QAAQ,CAAC,eAAD,CAAlC;AAEAC,EAAAA,SAAS,CACP;AACE;;AAEA;AACE;AACA,QAAIW,SAAS,GAAG,KAAhB,CAFF,CAIE;;AACA,QAAI,CAACA,SAAL,EAAgB;AACdV,MAAAA,UAAU,GAAGW,IAAb,CAAmBC,OAAD,IAChBR,gBAAgB,CACdQ,OAAO,CAACC,GAAR,CAAY,CAAC;AAAEC,QAAAA,EAAF;AAAMC,QAAAA;AAAN,OAAD,MAAmB;AAAEV,QAAAA,KAAK,EAAES,EAAT;AAAaR,QAAAA,KAAK,EAAES;AAApB,OAAnB,CAAZ,CADc,CADlB;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAuBd,aAAnC,EANc,CAQd;;AACAK,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAfH,CAiBE;;;AACA,WAAO,MAAM;AACXE,MAAAA,SAAS,GAAG,IAAZ;AACD,KAFD;AAGD,GAzBI;AA0BP;;;AAGA,IA7BO,CAAT;AA+BA,WA3C6B,CA4C7B;;AACA;AAAA;;AACE;;;;AAIA;AAAK,MAAA,SAAS,EAAEQ,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,QAAQ,EAAEX,OADZ;AAEE,MAAA,KAAK,EAAEF,KAFT;AAGE,MAAA,QAAQ,EAAGc,KAAD,IAAWV,QAAQ,CAACU,KAAK,CAACC,aAAN,CAAoBf,KAArB,CAH/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMGF,aAAa,CAACU,GAAd,CAAkB,CAACR,KAAD,EAAQC,KAAR;AAAA;;AACjB;AACA;AAAQ,MAAA,GAAG,EAAED,KAAb;AAAoB,MAAA,KAAK,EAAEA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGC,KADH,CAFD,CANH,CADF;AALF;AAqBD;;AAED,eAAeL,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getAuthors } from \"../api/authorApi\";\n\nfunction AuthorDropDown(props) {\n  // 1. Set initial value of state and return current value\n  const [authorOptions, setAuthorOptions] = useState([\n    { value: \"\", label: \"Loading...\" },\n  ]);\n\n  // 4. Stop use from interacting with dropdown while loading\n  const [loading, setLoading] = useState(true);\n\n  // 6. Control dropdown value selected in state and set initial value\n  const [value, setValue] = useState(\"Select author\");\n\n  useEffect(\n    () =>\n      /** first parameter is a function to execute when\n       *  the side effect runs */\n      {\n        // 5. Set unmounted flag to set state only if use is still on the page\n        let unmounted = false;\n\n        // 3. Fetch data from a API if use is still mounted\n        if (!unmounted) {\n          getAuthors().then((authors) =>\n            setAuthorOptions(\n              authors.map(({ id, name }) => ({ value: id, label: name }))\n            )\n          );\n          console.log(\"authors in state: \" + authorOptions);\n\n          // 4. Enable dropdown after loading\n          setLoading(false);\n        }\n\n        // on unmount -> 5\n        return () => {\n          unmounted = true;\n        };\n      },\n    /** second parameter determines when the side effect runs.\n     *  In our case this is just after the component first\n     *  renders because we have specified an empty array */\n    []\n  );\n  debugger;\n  // 2. Map current value of state to select dropdown options\n  return (\n    /** diabable while loading -> 4\n     *  bind value in state to value prop on select element -> 6\n     *  update this state in a change event listener with onChange prop ->6\n     */\n    <div className={wrapperClass}>\n      <select\n        disabled={loading}\n        value={value}\n        onChange={(event) => setValue(event.currentTarget.value)}\n      >\n        {/** iterate current value and label props in state*/}\n        {authorOptions.map((value, label) => (\n          /** render the relevant option element */\n          <option key={value} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\n\nexport default AuthorDropDown;\n"]},"metadata":{},"sourceType":"module"}