{"ast":null,"code":"// UUID\n// https://gist.github.com/LeverOne/1308368\n\n/* jshint ignore:start */\nfunction uuid(a, b) {\n  for (b = a = ''; a++ < 36; b += a * 51 & 52 ? (a ^ 15 ? 8 ^ Math.random() * (a ^ 20 ? 16 : 4) : 4).toString(16) : '-');\n\n  return b;\n}\n/* jshint ignore:end */\n\n\nmodule.exports = {\n  // Empties properties\n  __empty: function (doc) {\n    this.forEach(doc, function (value, key) {\n      delete doc[key];\n    });\n  },\n  // Copies properties from an object to another\n  __update: function (dest, src) {\n    this.forEach(src, function (value, key) {\n      dest[key] = value;\n    });\n  },\n  // Removes an item from an array\n  __remove: function (array, item) {\n    var index = this.indexOf(array, item);\n    if (index !== -1) array.splice(index, 1);\n  },\n  __id: function () {\n    var id = this.id || 'id';\n    return id;\n  },\n  getById: function (collection, id) {\n    var self = this;\n    return this.find(collection, function (doc) {\n      if (self.has(doc, self.__id())) {\n        return doc[self.__id()].toString() === id.toString();\n      }\n    });\n  },\n  createId: function (collection, doc) {\n    return uuid();\n  },\n  insert: function (collection, doc) {\n    doc[this.__id()] = doc[this.__id()] || this.createId(collection, doc);\n    var d = this.getById(collection, doc[this.__id()]);\n    if (d) throw new Error('Insert failed, duplicate id');\n    collection.push(doc);\n    return doc;\n  },\n  upsert: function (collection, doc) {\n    if (doc[this.__id()]) {\n      // id is set\n      var d = this.getById(collection, doc[this.__id()]);\n\n      if (d) {\n        // replace properties of existing object\n        this.__empty(d);\n\n        this.assign(d, doc);\n      } else {\n        // push new object\n        collection.push(doc);\n      }\n    } else {\n      // create id and push new object\n      doc[this.__id()] = this.createId(collection, doc);\n      collection.push(doc);\n    }\n\n    return doc;\n  },\n  updateById: function (collection, id, attrs) {\n    var doc = this.getById(collection, id);\n\n    if (doc) {\n      this.assign(doc, attrs, {\n        id: doc.id\n      });\n    }\n\n    return doc;\n  },\n  updateWhere: function (collection, predicate, attrs) {\n    var self = this;\n    var docs = this.filter(collection, predicate);\n    docs.forEach(function (doc) {\n      self.assign(doc, attrs, {\n        id: doc.id\n      });\n    });\n    return docs;\n  },\n  replaceById: function (collection, id, attrs) {\n    var doc = this.getById(collection, id);\n\n    if (doc) {\n      var docId = doc.id;\n\n      this.__empty(doc);\n\n      this.assign(doc, attrs, {\n        id: docId\n      });\n    }\n\n    return doc;\n  },\n  removeById: function (collection, id) {\n    var doc = this.getById(collection, id);\n\n    this.__remove(collection, doc);\n\n    return doc;\n  },\n  removeWhere: function (collection, predicate) {\n    var self = this;\n    var docs = this.filter(collection, predicate);\n    docs.forEach(function (doc) {\n      self.__remove(collection, doc);\n    });\n    return docs;\n  }\n};","map":{"version":3,"sources":["/Users/LelethuMkefa/dev/js-course/react-flux-app/node_modules/lodash-id/src/index.js"],"names":["uuid","a","b","Math","random","toString","module","exports","__empty","doc","forEach","value","key","__update","dest","src","__remove","array","item","index","indexOf","splice","__id","id","getById","collection","self","find","has","createId","insert","d","Error","push","upsert","assign","updateById","attrs","updateWhere","predicate","docs","filter","replaceById","docId","removeById","removeWhere"],"mappings":"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","sourcesContent":["// UUID\r\n// https://gist.github.com/LeverOne/1308368\r\n/* jshint ignore:start */\r\nfunction uuid (a, b) { for (b = a = ''; a++ < 36; b += a * 51 & 52 ? (a ^ 15 ? 8 ^ Math.random() * (a ^ 20 ? 16 : 4) : 4).toString(16) : '-');return b }\r\n/* jshint ignore:end */\r\n\r\nmodule.exports = {\r\n  // Empties properties\r\n  __empty: function (doc) {\r\n    this.forEach(doc, function (value, key) {\r\n      delete doc[key]\r\n    })\r\n  },\r\n\r\n  // Copies properties from an object to another\r\n  __update: function (dest, src) {\r\n    this.forEach(src, function (value, key) {\r\n      dest[key] = value\r\n    })\r\n  },\r\n\r\n  // Removes an item from an array\r\n  __remove: function (array, item) {\r\n    var index = this.indexOf(array, item)\r\n    if (index !== -1) array.splice(index, 1)\r\n  },\r\n\r\n  __id: function () {\r\n    var id = this.id || 'id'\r\n    return id\r\n  },\r\n\r\n  getById: function (collection, id) {\r\n    var self = this\r\n    return this.find(collection, function (doc) {\r\n      if (self.has(doc, self.__id())) {\r\n        return doc[self.__id()].toString() === id.toString()\r\n      }\r\n    })\r\n  },\r\n\r\n  createId: function (collection, doc) {\r\n    return uuid()\r\n  },\r\n\r\n  insert: function (collection, doc) {\r\n    doc[this.__id()] = doc[this.__id()] || this.createId(collection, doc)\r\n    var d = this.getById(collection, doc[this.__id()])\r\n    if (d) throw new Error('Insert failed, duplicate id')\r\n    collection.push(doc)\r\n    return doc\r\n  },\r\n\r\n  upsert: function (collection, doc) {\r\n    if (doc[this.__id()]) {\r\n      // id is set\r\n      var d = this.getById(collection, doc[this.__id()])\r\n      if (d) {\r\n        // replace properties of existing object\r\n        this.__empty(d)\r\n        this.assign(d, doc)\r\n      } else {\r\n        // push new object\r\n        collection.push(doc)\r\n      }\r\n    } else {\r\n      // create id and push new object\r\n      doc[this.__id()] = this.createId(collection, doc)\r\n      collection.push(doc)\r\n    }\r\n\r\n    return doc\r\n  },\r\n\r\n  updateById: function (collection, id, attrs) {\r\n    var doc = this.getById(collection, id)\r\n\r\n    if (doc) {\r\n      this.assign(doc, attrs, {id: doc.id})\r\n    }\r\n\r\n    return doc\r\n  },\r\n\r\n  updateWhere: function (collection, predicate, attrs) {\r\n    var self = this\r\n    var docs = this.filter(collection, predicate)\r\n\r\n    docs.forEach(function (doc) {\r\n      self.assign(doc, attrs, {id: doc.id})\r\n    })\r\n\r\n    return docs\r\n  },\r\n\r\n  replaceById: function (collection, id, attrs) {\r\n    var doc = this.getById(collection, id)\r\n\r\n    if (doc) {\r\n      var docId = doc.id\r\n      this.__empty(doc)\r\n      this.assign(doc, attrs, {id: docId})\r\n    }\r\n\r\n    return doc\r\n  },\r\n\r\n  removeById: function (collection, id) {\r\n    var doc = this.getById(collection, id)\r\n\r\n    this.__remove(collection, doc)\r\n\r\n    return doc\r\n  },\r\n\r\n  removeWhere: function (collection, predicate) {\r\n    var self = this\r\n    var docs = this.filter(collection, predicate)\r\n\r\n    docs.forEach(function (doc) {\r\n      self.__remove(collection, doc)\r\n    })\r\n\r\n    return docs\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script"}